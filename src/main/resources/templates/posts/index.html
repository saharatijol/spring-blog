<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="partials/head :: head('View all')">
    <meta charset="UTF-8">
    <title>View all</title>
</head>
<body>
<nav th:replace="partials/navbar :: navbar"></nav>
<h2>Index Posts</h2>
<div class="m-5" th:each="post:${postsIndex}">
<div class="card mx-2 my-2" >
<!--    Turns out, you don't need a get method form on this one BUT writing it this way exposes the id-->
    <h5 class="card-header"><a th:href="@{/posts/{id}(id=${post.id})}" th:text="${post.title}"></a></h5>
    <div class="card-body">
        <p class="card-text" th:text="${post.body}"></p>

        <form th:action="@{/posts/{id}/edit(id=${post.id})}" th:method="get">
            <button class="btn btn-primary mb-2">Edit</button>
        </form>


        <!-- Button trigger modal -->
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".myModal" th:data="${post.id}">
            Delete
        </button>

        <!-- Modal -->
<!--        <div class="modal fade" id="exampleModal" tabindex="-1" th:value="${post.id}">-->
<!--            <div class="modal-dialog">-->
<!--                <div class="modal-content">-->
<!--                    <div class="modal-header">-->
<!--                        <h5 class="modal-title">This will permanently delete <span th:text="${post.title}"></span> post</h5>-->
<!--                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">-->
<!--                            <span aria-hidden="true">&times;</span>-->
<!--                        </button>-->
<!--                    </div>-->
<!--                    <div class="modal-footer">-->
<!--                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close modal</button>-->
<!--                        <form th:action="@{/posts/{id}/delete(id=${post.id})}" th:method="post">-->
<!--                            <button type="submit" class="btn btn-primary">Yes, delete anyway</button>-->
<!--                        </form>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->


        <!-- Modal -->
        <div class="modal fade myModal" id="exampleModal" tabindex="-1" role="dialog" th:a>
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">This will permanently delete <span th:text="${post.title}"></span> post</h5>
                        <button type="button" class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                    </div>
                    <form th:action="@{/posts/{id}/delete(id=${post.id})}" method="post">
                        <div class="modal-body text-left">
                           <p>Are you Sure?</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                            <button type="submit" class="btn btn-danger">Delete</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


    </div>
</div>
</div>
<footer th:replace="partials/footer :: footer"></footer>
<th:block th:include="partials/scripts :: scripts"></th:block>
</body>
</html>